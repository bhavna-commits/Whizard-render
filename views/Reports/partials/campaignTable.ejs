<div class="py-3">
	<% if (campaigns && campaigns.length > 0) { %>
	<div class="">
		<table class="text-center min-w-full border-separate border-spacing-y-4">
			<thead>
				<tr class="text-gray-500">
					<td>Sno.</td>
					<td>Campaign Name</td>
					<td>Type</td>
					<td>Messages Sent</td>
					<td>Messages Failed</td>
					<td>Date Created</td>
					<!-- <td>Actions</td> -->
				</tr>
			</thead>
			<tbody>
				<% campaigns.forEach((campaign, index) => { %>
				<tr class="hover:bg-gray-100 cursor-pointer border" onclick="window.location.href='/reports/overview/<%= campaign.campaignId %>'">
					<td class="border-l border-t border-b rounded-lg py-4 border-gray-200 text-sm text-gray-500">
						<%= (page - 1) * 10 + (index + 1) %>
						<!-- Display index based on current page -->
					</td>
					<td class="border-t border-b border-gray-200">
						<%= campaign.campaignDetails.name %>
					</td>
					<td class="border-t border-b border-gray-200 px-4 py-2">
						<p class="inline-flex justify-center items-center h-fit w-fit px-2 py-1 rounded 
						<% if (campaign.campaignDetails.status == "SCHEDULED") {  %> 
						bg-yellow-200 text-yellow-500 
						<% } else { %>
						bg-green-100 text-green-500 
						<% } %>">
							<% if (campaign.campaignDetails.status !== "SCHEDULED") { %>
							Broadcast
							<% } else { %>
							Scheduled
							<% } %>
						</p>
					</td>

					
					<td class="text-gray-500 border-t border-b border-gray-200">
						<%= campaign.messagesSent %>
					</td>
					<td class="text-gray-500 border-t border-b border-gray-200">
						<%= campaign.messagesFailed %>
					</td>
					<td class="text-gray-500 border-t border-b border-r rounded-lg border-gray-200">
						<%= new Date(campaign.createdAt).toLocaleString('en-GB', {
                            year: 'numeric',
                            month: 'short',
                            day: '2-digit'
                        }) %>
					</td>
				</tr>
				<% }); %>
			</tbody>
		</table>
	</div>
	<!-- Pagination -->
	<div class="flex items-center justify-center py-4 space-x-4">
		<nav class="flex items-center">
			<ul class="flex space-x-1">
				<!-- Previous Button -->
				<li>
					<a href="/reports/campaign-list?page=<%= page > 1 ? page - 1 : 1 %>" class="px-3 py-2 rounded-md text-sm font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed" <%= page === 1 ? 'aria-disabled="true"' : '' %>>‹</a>
				</li>
				
				<!-- First Page Button -->
				<li>
					<a href="/reports/campaign-list?page=1" class="px-3 py-2 rounded-md text-sm font-medium <%= page === 1 ? 'text-white bg-blue-600 border-blue-600' : 'text-gray-700 bg-white border-gray-300 hover:bg-gray-50' %>">1</a>
				</li>
				
				<% if (page > 3) { %>
				<!-- Show "..." if current page is greater than 3 -->
				<li><span class="px-3 py-2 text-sm text-gray-500">...</span></li>
				<% } %>
				
				<!-- Dynamic Page Numbers based on current page -->
				<% for (let i = Math.max(2, page - 1); i <= Math.min(totalPages - 1, page + 1); i++) { %>
				<li>
					<a href="/reports/campaign-list?page=<%= i %>" class="px-3 py-2 rounded-md text-sm font-medium <%= i === page ? 'text-white bg-blue-600 border-blue-600' : 'text-gray-700 bg-white border-gray-300 hover:bg-gray-50' %>"><%= i %></a>
				</li>
				<% } %>
				
				<% if (page < totalPages - 2) { %>
				<!-- Show "..." if there are more pages -->
				<li><span class="px-3 py-2 text-sm text-gray-500">...</span></li>
				<% } %>
				
				<!-- Last Page Button -->
				<% if (totalPages > 1) { %>
				<li>
					<a href="/reports/campaign-list?page=<%= totalPages %>" class="px-3 py-2 rounded-md text-sm font-medium <%= page === totalPages ? 'text-white bg-blue-600 border-blue-600' : 'text-gray-700 bg-white border-gray-300 hover:bg-gray-50' %>"><%= totalPages %></a>
				</li>
				<% } %>
				
				<!-- Next Button -->
				<li>
					<a href="/reports/campaign-list?page=<%= page < totalPages ? page + 1 : totalPages %>" class="px-3 py-2 rounded-md text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50">›</a>
				</li>
			</ul>
		</nav>
		
		<!-- "Go to page" input -->
		<div class="flex items-center space-x-2">
			<span class="text-sm text-gray-700">Go to page</span>
			<input type="number" min="1" max="<%= totalPages %>" class="w-16 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="<%= page %>" id="pageInput" />
			<button type="button" class="px-3 py-1 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" onclick="goToPage()">Go</button>
		</div>
	</div>
	
	<script>
		function goToPage () {
			const pageInput = document.getElementById('pageInput');
			const page = parseInt(pageInput.value);
			const totalPages = <%= totalPages %>;
			
			if (page > totalPages) {
				alert("Page doesn't exist. Try a lower number.");
				pageInput.value = <%= page %>; // Reset input to the current page
			} else if (page < 1) {
				alert("Page number should be at least 1.");
				pageInput.value = <%= page %>;
			} else {
				window.location.href = `/campaign-list?page=${page}`;
			}
		}
	</script>
	<% } else { %>
	<!-- Empty state -->
	<div class="flex flex-col items-center justify-center h-64">
		<p class="text-gray-500">No campaigns found</p>
	</div>
	<% } %>
</div>