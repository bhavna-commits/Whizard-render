<% if (list.length > 0) { %>

<div class="row py-3">
	<% list.forEach(template => { %>
	<div class="col-12 col-md-6 col-lg-3 py-2">
		<div class="custom-card-container shadow-sm">
			<div class="card-container p-3">
				<div class="custom-card-body bg-white">
					
					<% if (template.header && template.header.type === 'text') { %>
					<!-- Display header text if header.type is 'text' -->
					<h6 class="custom-card-header"><%= template.header.content %></h6>
					<% } else if (template.header && template.header.type === 'media') { %>
					<!-- Display media content if header.type is 'media' -->
					<img src="<%= template.header.content %>" alt="Header Media" class="custom-card-img">
					<% } %>
					
					<h5 class="custom-card-title"><%= template.body %></h5>
					<p class="custom-card-subtitle"><%= template.footer %></p>
					<div>
						<a href="#" class="custom-btn">
							<i class="fas fa-external-link-alt"></i> Visit Now
						</a>
						<a href="tel:+123456789" class="custom-btn">
							<i class="fas fa-phone-alt"></i> Call Now
						</a>
					</div>
				</div>
			</div>
			<div class="custom-card-footer">
				<%= template.templateName %>
			</div>
		</div>
	</div>
	<% }) %>
</div>

<% } else { %>
<div class="flex flex-col items-center justify-center min-h-[400px]  rounded-lg mt-4">
	<div class="text-center">
		<img src="https://img.freepik.com/free-vector/hands-holding-tablet-with-forefinger-clicking-start-button-new-application-launch-flat-illustration_74855-20595.jpg?ga=GA1.1.131490893.1732525963&semt=ais_hybrid" alt="No contacts" class="w-48 h-48 mx-auto mb-4">
		
		<h3 class="text-xl font-semibold text-gray-900 mb-2">No Templates yet</h3>
		<p class="text-gray-600 mb-6">Start adding templates by clicking on "Create new template"</p>
		<button class="bg-black p-2 flex items-center rounded-lg text-base font-thin w-full justify-center" onclick="document.location='create-template'">
			<i class="pg-icon font-thin px-2">add</i>
			Create new template
		</button>
	</div>
</div>
<% } %>


<div class="flex items-center justify-center py-4 space-x-4">
	<nav class="flex items-center">
		<ul class="flex space-x-1">
			<!-- Previous Button -->
			<li>
				<a href="/template?page=<%= page > 1 ? page - 1 : 1 %>" class="px-3 py-2 rounded-md text-sm font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed" <%= page === 1 ? 'aria-disabled="true"' : '' %>>‹</a>
			</li>
			
			<!-- First Page Button -->
			<li>
				<a href="/template?page=1" class="px-3 py-2 rounded-md text-sm font-medium <%= page === 1 ? 'text-white bg-blue-600 border-blue-600' : 'text-gray-700 bg-white border-gray-300 hover:bg-gray-50' %>">1</a>
			</li>
			
			<% if (page > 3) { %>
			<!-- Show "..." if current page is greater than 3 -->
			<li><span class="px-3 py-2 text-sm text-gray-500">...</span></li>
			<% } %>
			
			<!-- Dynamic Page Numbers based on current page -->
			<% for (let i = Math.max(2, page - 1); i <= Math.min(totalPages - 1, page + 1); i++) { %>
			<li>
				<a href="/template?page=<%= i %>" class="px-3 py-2 rounded-md text-sm font-medium <%= i === page ? 'text-white bg-blue-600 border-blue-600' : 'text-gray-700 bg-white border-gray-300 hover:bg-gray-50' %>"><%= i %></a>
			</li>
			<% } %>
			
			<% if (page < totalPages - 2) { %>
			<!-- Show "..." if there are more pages -->
			<li><span class="px-3 py-2 text-sm text-gray-500">...</span></li>
			<% } %>
			
			<!-- Last Page Button -->
			<% if (totalPages > 1) { %>
			<li>
				<a href="/template?page=<%= totalPages %>" class="px-3 py-2 rounded-md text-sm font-medium <%= page === totalPages ? 'text-white bg-blue-600 border-blue-600' : 'text-gray-700 bg-white border-gray-300 hover:bg-gray-50' %>"><%= totalPages %></a>
			</li>
			<% } %>
			
			<!-- Next Button -->
			<li>
				<a href="/template?page=<%= page < totalPages ? page + 1 : totalPages %>" class="px-3 py-2 rounded-md text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50">›</a>
			</li>
		</ul>
	</nav>
	
	<!-- "Go to page" input -->
	<div class="flex items-center space-x-2">
		<span class="text-sm text-gray-700">Go to page</span>
		<input type="number" min="1" max="<%= totalPages %>" class="w-16 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="<%= page %>" id="pageInput" />
		<button type="button" class="px-3 py-1 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" onclick="goToPage()">Go</button>
	</div>
</div>

<script>
	function goToPage () {
		const pageInput = document.getElementById('pageInput');
		const page = parseInt(pageInput.value);
		const totalPages = <%= totalPages %>;
		
		if (page > totalPages) {
			alert("Page doesn't exist. Try a lower number.");
			pageInput.value = <%= page %>; // Reset input to the current page
		} else if (page < 1) {
			alert("Page number should be at least 1.");
			pageInput.value = <%= page %>;
		} else {
			window.location.href = `/contact-list?page=${page}`;
		}
	}
</script>	