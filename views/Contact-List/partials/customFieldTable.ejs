<div class="py-3">
	<% if (customFields && customFields.length > 0) { %>
	<div class="table-responsive">
		<table class="min-w-full bg-white">
			<thead>
				<tr class="bg-gray-50 border-b">
					<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sno.</th>
					<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Field name</th>
					<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Field type</th>
					<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
				</tr>
			</thead>
			<tbody class="divide-y divide-gray-200">
				<% customFields.forEach((field, index) => { %>
				<tr class="hover:bg-green-100 cursor-pointer">
					<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= index + 1 %></td>
					<td class="px-6 py-4 whitespace-nowrap text-sm">
						<%= field.fieldName %>
					</td>
					<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= field.fieldType %></td>
					<td class="px-6 py-4 whitespace-nowrap text-sm">
						<!-- Edit Button -->
						<button aria-label="Edit field" class="text-gray-600 hover:text-blue-600 mx-1" onclick="event.stopPropagation(); openEditModal('<%= JSON.stringify(field) %>');">
							<i class="fas fa-edit"></i>
						</button>
						<!-- Delete Button -->
						<button aria-label="Delete field" class="text-gray-600 hover:text-red-600 mx-1" onclick="event.stopPropagation(); openDeleteModal('<%= field._id %>', '<%= field.fieldName %>');">
							<i class="fas fa-trash-alt"></i>
						</button>
					</td>
				</tr>
				<% }); %>
			</tbody>
		</table>
		
		<!-- Edit Modal Structure -->
		<div id="editFieldModal" class="fixed inset-0 bg-gray-800 bg-opacity-50 z-50 flex items-center justify-center pointer-events-none opacity-0 transition-opacity duration-300">
			<div class="bg-white w-1/3 rounded-lg shadow-lg p-6 transform scale-95 transition-transform duration-300">
				<button class="edit-modal-close-btn absolute top-8 right-8 text-gray-400 hover:text-gray-600">
					<i class="fas fa-times"></i>
				</button>
				<h2 class="text-xl font-bold mb-4">Edit Field</h2>
				<form id="editFieldForm">
					<div class="mb-4">
						<label for="editFieldName" class="block text-sm font-medium text-gray-700">Field Name</label>
						<input id="editFieldName" type="text" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
					</div>
					<div class="mb-4">
						<label for="editFieldType" class="block text-sm font-medium text-gray-700">Field Type</label>
						<input id="editFieldType" type="text" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
					</div>
					<div class="flex justify-end">
						<button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">Save Changes</button>
					</div>
				</form>
			</div>
		</div>
		
		<!-- Delete Field Modal -->
		<div class="modal fade" id="deleteFieldModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="deleteModalLabel">Delete Field</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						Are you sure you want to delete <strong id="deleteFieldName"></strong>?
					</div>
					<div class="modal-footer">
						<form id="deleteFieldForm" method="POST" action="/delete-field">
							<input type="hidden" name="fieldId" id="deleteFieldId">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
							<button type="submit" class="btn btn-danger">Delete</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<% } else { %>
	<!-- Empty state -->
	<div class="flex flex-col items-center justify-center min-h-[400px]  rounded-lg mt-4">
		<div class="text-center">
			<h3 class="text-xl font-semibold text-gray-900 mb-2">No fields yet</h3>
			<p class="text-gray-600 mb-6">Start adding custom fields by clicking on "Create new field"</p>
			<button onclick="document.getElementById('create-Field').click()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
				<i class="pg-icon pr-2">add</i>
				Create new Field
			</button>
		</div>
	</div>
	<% } %>
</div>
