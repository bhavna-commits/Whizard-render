<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>Whizard - Contact List Overview</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
	<!-- <link href="assets/plugins/pace/pace-theme-flash.css" rel="stylesheet" type="text/css" /> -->
	<!-- <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" /> -->
	<!-- <link href="assets/plugins/jquery-scrollbar/jquery.scrollbar.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="assets/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" media="screen" /> -->
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
	<link href="styles/filter-sidebar.css" rel="stylesheet" type="text/css" />
	<link href="styles/style.css" rel="stylesheet" type="text/css" />
	<link href="styles/countrySelector.css" rel="stylesheet" type="text/css" />
	<script src="https://cdn.tailwindcss.com"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
	<!-- <link href="styles/createList.css" rel="stylesheet" type="text/css" /> -->
	<style>
		.remove-filter {
			user-select: none;
			font-weight: bold;
			padding-left: 8px;
		}
		
		input {
			border: 1px solid #e5e7eb;
			border-radius: 6px;
		}
	</style>
</head>

<body>
	
	<!-- Sidebar -->
	<div class="layout-container">
		<%- include("../commonJS/sidebar")  %>
		<%- include("../commonJS/loader") %>
		<!-- END SIDEBAR MENU TOP TRAY CONTENT-->
		
		<!-- START PAGE-CONTAINER -->
		<div class="main-content">
			<!-- END HEADER -->
			<div class="logo breadCrumb">
				<div class=" flex items-center">
					<!-- START BREADCRUMB -->
					
					<div class="flex items-center">
						<a href="/" class="text-gray-500 hover:text-gray-700 hover:no-underline">Dashboard</a>
						<svg class="w-4 h-4 mx-2 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L11.586 10 7.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
						</svg>
					</div>
					<div class="flex items-center">
						<a href="/contact-list" class="text-gray-500 hover:no-underline hover:text-gray-700">Contact List</a>
						<svg class="w-4 h-4 mx-2 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L11.586 10 7.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
						</svg>
					</div>
					<a href="#" class="text-red-600 hover:no-underline hover:text-gray-700">Overview</a>
					<div class="relative inline-block pl-2">
						<i class="info-icon text-red-700 hover:text-red-900">
							<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<circle cx="12" cy="12" r="10"></circle>
								<line x1="12" y1="16" x2="12" y2="12"></line>
								<line x1="12" y1="8" x2="12.01" y2="8"></line>
							</svg>
						</i>
						<div class="tooltip invisible opacity-0 w-64 bg-gray-900 text-white text-sm rounded absolute p-4 -translate-x-1/2 left-1/2 mt-2 transition-opacity duration-300">
							<!-- Arrow -->
							<div class="absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-gray-900 transform rotate-45"></div>
							<!-- Content -->
							<div class="relative">
								View, edit, delete, or add individual contacts with detailed attributes for better audience management.
							</div>
						</div>
					</div>
					<!-- END BREADCRUMB -->
				</div>
			</div>
			
			<!-- START card -->
			<div class="mainDiv">
				<div class="flex w-full justify-between items-center mt-3 mb-2">
					<div class="flex w-fit justify-start items-center">
						<input type="text" id="contactListName" placeholder="Edit Contact List name" class="outline-none focus:outline-none w-fit border-t-0 border-l-0 border-r-0 py-2 px-2 rounded-none text-lg" value="<%= listName %>" />
						
						<button aria-label="" id="saveChangesBtn" type="button" class="border ml-2 py-2 px-2 rounded transition-colors ease-in-out duration-300 hover:bg-gray-100 text-sm font-medium opacity-50 cursor-not-allowed" disabled>
							Save name
						</button>
					</div>
					
					<div class="flex items-center justify-evenly">
						<% if (access.contactList.addContactIndividual) { %>
						<div class="text-center pr-3">
							<button aria-label="Add-Contact" onclick="openUploadCSV()" type="button" class="border py-2 px-4 rounded transition-colors ease-in-out duration-300 hover:bg-gray-100 text-sm font-semibold flex items-center">
								<span class="icon pr-2">
									<img src="svg/uploadDark.svg" alt="" />
								</span>
								Upload CSV
								<input type="file" name="" id="contactFile" accept=".csv,.xls,.xlsx" hidden />
							</button>
						</div>
						<%- include("partials/overView/addMoreCSV") %>
						<% } else { %>
						<div class="text-center pr-3">
							<button type="button" class="border py-2 px-4 rounded transition-colors ease-in-out duration-300 text-gray-500 hover:cursor-not-allowed text-sm font-semibold flex items-center" disabled>
								<span class="icon pr-2">
									<img src="svg/uploadDark.svg" alt="" />
								</span>
								Upload CSV
							</button>
						</div>
						<% } %>
						<% if (access.contactList.addContactIndividual) { %>
						<div class="text-center pr-3">
							<button aria-label="Add-Contact" onclick="openAddContact()" type="button" class="border py-2 px-4 rounded transition-colors ease-in-out duration-300 hover:bg-gray-100 text-sm font-semibold flex items-center">
								<span class="icon pr-2">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
										<circle cx="9" cy="7" r="4" />
										<path d="M17 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
										<line x1="19" y1="8" x2="19" y2="14" />
										<line x1="16" y1="11" x2="22" y2="11" />
									</svg>
								</span>
								Add Contact
							</button>
						</div>
						<%- include("partials/overView/addContact") %>
						<% } else { %>
						<div class="text-center pr-3">
							<button type="button" class="border py-2 px-4 rounded transition-colors ease-in-out duration-300 text-gray-500 hover:cursor-not-allowed text-sm font-semibold flex items-center" disabled>
								<span class="icon pr-2">
									<img src="svg/filter.svg" alt="">
								</span>
								Add Contact
							</button>
						</div>
						<% } %>
						<!-- Filters Button -->
						<div class="text-center pr-3">
							<button onclick="openFilterModal()" type="button" class="border py-2 px-4 rounded transition-colors ease-in-out duration-300 hover:bg-gray-100 text-sm font-semibold flex items-center filter-button">
								<span class="icon pr-1">
									<img src="svg/filter.svg" alt="filter" class="filter-icon" />
									<img src="svg/filter-filled.svg" alt="filter-filled" class="filter-icon-filled hidden" />
								</span>
								<span id="filter-text" class="text-sm ">Filters</span>
							</button>
						</div>
						<script>
							const list = new URLSearchParams(location.search);
							const listId = list.get("listId");
							const listName = list.get("listName");
						</script>
						<%- include("partials/overView/filters") %>
						<% if (access?.contactList?.sendBroadcast && whatsAppStatus === "Live") { %>
						<button aria-label="Create new Contact list" type="button" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" onclick="location.href=`/contact-list/createCampaign?listId=${listId}&listName=${listName}`">
							<span>Send message</span>
						</button>
						<% } else if (whatsAppStatus == "Pending")  { %>
						<button type="button" title="Connect with whatsApp Business API to send message" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded text-white bg-gray-500 hover:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" disabled>
							<span>Send message</span>
						</button>
						<% } else if(access?.contactList?.sendBroadcast) { %>
						<button aria-label="Create new Contact list" type="button" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" onclick="location.href=`/contact-list/createCampaign?listId=${listId}&listName=${listName}`">
							<span>Send message</span>
						</button>
						<% } else { %>
						<button type="button" title="You don't have permissions to access this" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded text-white bg-gray-500 hover:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" disabled>
							<span>Send message</span>
						</button>
						<% } %>
					</div>
					<!-- Pop-Up Modal to create List -->
				</div>
				
				<!-- Contact list table -->
				<div class="w-full">
					<%- include('partials/overView/OverViewTable') %>
				</div>
			</div>
			
			<!-- Pop-Up Modal to Edit List -->
			<%- include('partials/overView/editContact') %>
		</div>
	</div>
	<script src="assets/plugins/pace/pace.min.js" type="text/javascript"></script>
	<script src="assets/plugins/liga.js" type="text/javascript"></script>
	<script src="assets/plugins/jquery/jquery-3.2.1.min.js" type="text/javascript"></script>
	<script src="assets/plugins/modernizr.custom.js" type="text/javascript"></script>
	<script src="assets/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
	<script src="assets/plugins/popper/umd/popper.min.js" type="text/javascript"></script>
	<!-- <script src="assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> -->
	<script src="assets/plugins/jquery/jquery-easy.js" type="text/javascript"></script>
	<script src="assets/plugins/jquery-unveil/jquery.unveil.min.js" type="text/javascript"></script>
	<script src="assets/plugins/jquery-ios-list/jquery.ioslist.min.js" type="text/javascript"></script>
	<script src="assets/plugins/jquery-actual/jquery.actual.min.js"></script>
	<script src="assets/plugins/jquery-scrollbar/jquery.scrollbar.min.js"></script>
	<script src="pages/js/pages.js"></script>
	<script src="assets/js/scripts.js" type="text/javascript"></script>
	<script src="assets/js/card.js" type="text/javascript"></script>
	<script src="assets/js/scripts.js" type="text/javascript"></script>
	<!-- <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
	<script src="/toast.js"></script>
	<script src="/menu.js"></script>
	<script src="/contact-list/js/selectContacts.js"></script>
	<script src="/contact-list/js/editContact.js"></script>
	<script src="/contact-list/js/addMoreCSV.js"></script>
</body>

</html>