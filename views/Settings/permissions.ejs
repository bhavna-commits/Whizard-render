<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
	<meta charset="utf-8" />
	<title>User Management - </title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no" />
	<link rel="apple-touch-icon" href="pages/ico/60.png" />
	<link rel="apple-touch-icon" sizes="76x76" href="pages/ico/76.png" />
	<link rel="apple-touch-icon" sizes="120x120" href="pages/ico/120.png" />
	<link rel="apple-touch-icon" sizes="152x152" href="pages/ico/152.png" />
	<link rel="icon" type="image/x-icon" href="favicon.ico" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-touch-fullscreen" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="default" />
	<meta content="Meet pages - The simplest and fastest way to build web UI for your dashboard or app." name="description" />
	<meta content="Ace" name="author" />
	<link href="assets/plugins/pace/pace-theme-flash.css" rel="stylesheet" type="text/css" />
	<link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<!-- <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" /> -->
	<link href="assets/plugins/jquery-scrollbar/jquery.scrollbar.css" rel="stylesheet" type="text/css" media="screen" />
	<link href="assets/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" media="screen" />
	<!-- <link class="main-stylesheet" href="pages/css/themes/corporate.css" rel="stylesheet" type="text/css" /> -->
	<!-- Please remove the file below for production: Contains demo classes -->
	<link class="main-stylesheet" href="assets/css/style.css" rel="stylesheet" type="text/css" />
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
	<script src="https://viralpitch.co/insights/app/js/apexcharts-bundle/dist/apexcharts.js"></script>
	<link rel="stylesheet" href="styles/template.css" />
	<link rel="stylesheet" href="https://viralpitch.co/insights/app/js/apexcharts-bundle/dist/apexcharts.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
	<link href="styles/style.css" rel="stylesheet" type="text/css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" type="text/css" href="styles/template-preview.css" />
</head>

<body>
	<!-- Loader HTML -->
	<div id="loader" class="loader">
		<div class="w-full h-full flex justify-center items-center">
			<img src="/assets/img/Wizard_logo.png" alt="Whizard Logo" class="animate-pulse loading-image" />
		</div>
	</div>
	
	<div class="layout-container">
		<nav class="sidebar">
			<div class="logo py-3">
				<img onclick="location.href = '/'" class="cursor-pointer" src="/assets/img/Wizard_logo.png" alt="Whizard Logo" />
			</div>
			<ul class="mt-4 space-y-4">
				<li>
					<a href="/" class=""><span class="icon"><i class="fas fa-chart-line"></i></span>
						Dashboard</a>
				</li>
				<li class="">
					<a href="/chats"><span class="icon"><i class="fa-regular fa-comment"></i></span>
						Chats</a>
				</li>
				<li class="">
					<a href="/contact-list"><span class="icon "><i class="fa-regular fa-address-book"></i></span>
						
						Contact List</a>
				</li>
				<li class="">
					<a href="/template"><span class="icon "><i class="fa-regular fa-envelope"></i></span>
						Template</a>
				</li>
				<li class="">
					<a href="/settings"><span class="icon active"><i class="fa-regular fa-user"></i></span>
						Settings</a>
				</li>
				<li class="py-1">
					<a href="/reports/campaign-list"><span class="icon"><i class="fa-regular fa-chart-bar"></i></span>
						Reports</a>
				</li>
			</ul>
			<div class=" user-profile text-white flex justify-center items-center text-center">
				<% if (photo) { %>
				<img src="/<%= photo %>" alt="User Profile" class="user-profile-img" onclick="toggleDropdown()" />
				<% } else { %>
				<!-- Extract and display the initials -->
				<div class="user-profile-name bg-[<%= color %>]" onclick="toggleDropdown()">
					<% let initials = name.split(' ').map(n => n[0].toUpperCase()).join(''); %>
					<%= initials %>
				</div>
				<% } %>
				<div id="dropdownMenu" class="account-menu hidden">
					<a href="/settings/profile">Profile</a>
					<button onclick="logout()">Logout</button>
				</div>
			</div>
				
			<script>
				function toggleDropdown () {
					const dropdownMenu = document.getElementById('dropdownMenu');
					const sidebar = document.querySelector('.sidebar');
					
					dropdownMenu.classList.toggle('hidden');
					
					if (dropdownMenu.classList.contains('hidden')) {
						sidebar.style.overflow = 'auto';
					} else {
						sidebar.style.overflow = 'visible';
					}
				}
				
				async function logout () {
					try {
						const response = await fetch('/api/users/logout', {
							method: 'POST',
							credentials: 'same-origin'
						});
						
						if (response.ok) {
							window.location.href = '/login';
						} else {
							alert('Error logging out.');
						}
					} catch (err) {
						console.error('Error:', err);
						alert('Error logging out.');
					}
				}
				
				// Close the dropdown if clicked outside
				window.onclick = function (event) {
					const dropdown = document.getElementById("dropdownMenu");
					if (!event.target.closest('.user-profile')) {
						dropdown.classList.add("hidden");
					}
				};
			</script>
		</nav>
		<!-- END SIDEBAR MENU TOP TRAY CONTENT-->
		
		<!-- START PAGE-CONTAINER -->
		<div class="main-content  p-2">
			<nav class="flex px-3 logo mt-4" aria-label="Breadcrumb">
				<div class="flex items-center">
					<a href="/settings" class="text-gray-500 hover:text-gray-700 text-xl font-medium">Settings</a>
					<svg class="w-4 h-4 mx-2 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L11.586 10 7.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
					</svg>
				</div>
				
				<div class="flex items-center">
					<a href="/settings/user-management" class="text-gray-500 hover:text-gray-700 text-xl font-medium ">User Management</a>
					<svg class="w-4 h-4 mx-2 text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L11.586 10 7.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
					</svg>
				</div>
				<div class="flex items-center">
					<a href="/settings/user-management/permissions" class="text-red-500 hover:text-gray-700 text-xl font-medium ">Permissions</a>
				</div>
			</nav>
			<div class=" mx-auto p-6">
				<h2 class="text-2xl font-bold mb-6 text-gray-900">Permissions Management</h2>
				<form id="permissionForm" method="post" class=" mx-auto p-6 space-y-6">
					<div class="mb-6">
						<label for="role" class="block text-gray-700 text-sm font-bold mb-2">Role Name:</label>
						<input type="text" id="role" name="role" class="w-full px-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter role name" required />
					</div>
					
					<!-- Dashboard Permissions -->
					<div class="bg-white rounded-xl border p-6">
						<h2 class="text-lg font-semibold mb-4 text-gray-800">Dashboard</h2>
						<div class="space-y-4">
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">View Users</label>
								<button type="button" class="toggle-button w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="dashboard.viewUsers">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Connect Now</label>
								<button type="button" class="toggle-button w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="dashboard.connectNow">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Quick Actions</label>
								<button type="button" class="toggle-button w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="dashboard.quickActions">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
						</div>
					</div>
					<!-- Chats Section -->
					<div class="bg-white rounded-xl border p-6">
						<div class="flex items-center justify-between mb-4">
							<h2 class="text-lg font-semibold text-gray-800">Chats</h2>
							<button type="button" class="toggle-section w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="chats">
								<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
							</button>
						</div>
						<div data-section="chats" class="hidden space-y-4 mt-4">
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Redirect to VP Chat</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="chats.redirectToVpchat">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
						</div>
					</div>
					<!-- Contacts Section -->
					<div class="bg-white rounded-xl border p-6">
						<div class="flex items-center justify-between mb-4">
							<h2 class="text-lg font-semibold text-gray-800">Contacts</h2>
							<button type="button" class="toggle-section w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="contacts">
								<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
							</button>
						</div>
						<div data-section="contacts" class="hidden space-y-4 mt-4">
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Add Contact Individual</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="contacts.addContactIndividual">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Add Contact List CSV</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="contacts.addContactListCSV">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Delete List</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="contacts.deleteList">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Send Broadcast</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="contacts.sendBroadcast">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
						</div>
					</div>
					
					<!-- Templates Section -->
					<div class="bg-white rounded-xl border p-6">
						<div class="flex items-center justify-between mb-4">
							<h2 class="text-lg font-semibold text-gray-800">Templates</h2>
							<button type="button" class="toggle-section w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="templates">
								<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
							</button>
						</div>
						<div data-section="templates" class="hidden space-y-4 mt-4">
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Edit Template</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="templates.editTemplate">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Create Template</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="templates.createTemplate">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Delete Template</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="templates.deleteTemplate">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
						</div>
					</div>
					<!-- Settings Section -->
					<div class="bg-white rounded-xl border p-6">
						<div class="flex items-center justify-between mb-4">
							<h2 class="text-lg font-semibold text-gray-800">Settings</h2>
							<button type="button" class="toggle-section w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="settings">
								<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
							</button>
						</div>
						<div data-section="settings" class="hidden space-y-4 mt-4">
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">User Management</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="settings.userManagement">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Activity Logs</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="settings.activityLogs">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
							
							<!-- Manage Tags Subsection -->
							<div class="border-l-2 border-gray-200 pl-4 mb-4">
								<h3 class="text-md font-medium text-gray-700 mb-3">Manage Tags</h3>
								<div class="space-y-4">
									<div class="flex items-center justify-between">
										<label class="text-sm font-medium text-gray-700">View Tags</label>
										<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="settings.manageTags.view">
											<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
										</button>
									</div>
									<div class="flex items-center justify-between">
										<label class="text-sm font-medium text-gray-700">Add Tags</label>
										<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="settings.manageTags.add">
											<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
										</button>
									</div>
									<div class="flex items-center justify-between">
										<label class="text-sm font-medium text-gray-700">Delete Tags</label>
										<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="settings.manageTags.delete">
											<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Reports Section -->
					<div class="bg-white rounded-xl border p-6">
						<div class="flex items-center justify-between mb-4">
							<h2 class="text-lg font-semibold text-gray-800">Reports</h2>
							<button type="button" class="toggle-section w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="reports">
								<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
							</button>
						</div>
						<div data-section="reports" class="hidden space-y-4 mt-4">
							<!-- Conversation Reports Subsection -->
							<div class="border-l-2 border-gray-200 pl-4 mb-4">
								<h3 class="text-md font-medium text-gray-700 mb-3">Conversation Reports</h3>
								<div class="space-y-4">
									<div class="flex items-center justify-between">
										<label class="text-sm font-medium text-gray-700">View Reports</label>
										<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="reports.conversationReports.viewReports">
											<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
										</button>
									</div>
									<div class="flex items-center justify-between">
										<label class="text-sm font-medium text-gray-700">Retargeting Users</label>
										<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="reports.conversationReports.retargetingUsers">
											<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
										</button>
									</div>
									<div class="flex items-center justify-between">
										<label class="text-sm font-medium text-gray-700">Redirect to VP Chat</label>
										<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="reports.conversationReports.redirectToVpchat">
											<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
										</button>
									</div>
								</div>
							</div>
							<!-- Cost Reports -->
							<div class="flex items-center justify-between">
								<label class="text-sm font-medium text-gray-700">Cost Reports</label>
								<button type="button" class="sub-toggle w-14 h-7 flex items-center rounded-full p-1 duration-300 ease-in-out bg-gray-200" data-toggle="reports.costReports">
									<div class="bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out"></div>
								</button>
							</div>
						</div>
					</div>
					<div class="mt-8">
						<button type="submit" class="w-full bg-red-400  text-white px-4 py-2 rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
							Save Permissions
						</button>
					</div>
				</form>
			</div>
		</div>
		
		<script defer src="/settings/js/permissions.js"></script>
		<script>
			window.addEventListener('load', function () {
				// Fade out the loader smoothly by changing the opacity
				var loader = document.getElementById('loader');
				loader.style.transition = 'opacity 0.3s ease'; // Smooth fade out
				loader.style.opacity = '0';
				
				// Completely remove the loader after the fade-out effect is finished
				setTimeout(function () {
					loader.style.display = 'none'; // Ensure loader is no longer in the DOM flow
				}, 300); // Match the duration of the fade-out (0.5 seconds in this case)
			});
		</script>
</body>

</html>